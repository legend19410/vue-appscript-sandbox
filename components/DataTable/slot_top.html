  <template v-slot:top>
      <v-toolbar :elevation="6">
         <v-breadcrumbs divider="mdi-chevron-right">
            <v-breadcrumbs-item href="/" >
              <v-icon start small color="primary">mdi-home</v-icon>
            </v-breadcrumbs-item> > 

            <v-breadcrumbs-item active>
              Customers
            </v-breadcrumbs-item> >

            <v-breadcrumbs-item active>
              Customer Requests
            </v-breadcrumbs-item>
          </v-breadcrumbs>

        <v-spacer></v-spacer>
        <!-- Implement refresh button -->
        <v-btn @click="()=>{
          refresh(appSchema);
        }">
          <v-icon>mdi-refresh</v-icon>
        </v-btn>

        <v-spacer></v-spacer>

        <v-text-field v-model="search" prepend-inner-icon="mdi-magnify" density="compact" label="Search" single-line
          flat hide-details variant="solo-filled"></v-text-field>
        <v-spacer></v-spacer>

        <v-spacer></v-spacer>
        <v-dialog v-model="dialog" max-width="900px">
          <template v-slot:activator="{ props }">
            <v-btn color="blue" dark class="mb-2 mx-2" v-bind="props" prepend-icon="mdi-plus" variant="elevated" v-if="showNewItemBtn" @click="handleAddNewBtn">
              New Item
            </v-btn>
          </template>

          <v-card>
            <v-card-title>
              <span class="text-h5">{{ formTitle }}</span>
            </v-card-title>

            <v-card-text>
              <v-container>
                <v-row>
                  <v-col 
                    v-for="fld in schema.filter(o => !o.formHidden)" 
                    :key="fld.key" :cols="fld.col_size.cols" 
                    :sm="fld.col_size.sm" 
                    :md="fld.col_size.md"
                  >
                    <template v-if="fld.type === 'text'">
                      <v-text-field variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'email'">
                      <v-text-field variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'formula'">
                      <v-text-field variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" :rules="fld.required ? [rules.required] : []" disabled />
                    </template>

                    <template v-if="fld.type === 'textarea'">
                      <v-textarea variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'select' || fld.type === 'select_inline_editable'">
                      <v-select variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" :items="fld.options" :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'select_option_source'">
                      <v-select variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" :items="fld.options" :item-title="fld.optionSource.label" :item-value="fld.optionSource.key" :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'select_option_source_multiple'">
                      <v-select variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" :items="fld.options" :item-title="fld.optionSource.label" :item-value="fld.optionSource.key" item-disabled="disabled" multiple chips :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'checkbox'">
                      <v-checkbox :label="fld.label" v-model="editedItem[fld.key]" :rules="fld.required ? [rules.required] : []" />
                    </template>

                    <template v-if="fld.type === 'tags'">
                      <v-combobox :label="fld.label" :items="fld.options" v-model="editedItem[fld.key]" chips multiple :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'radio'">
                      <v-radio-group inline v-model="editedItem[fld.key]" :rules="fld.required ? [rules.required] : []">
                        <template v-slot:label>
                          <div>{{ fld.label }}</div>
                        </template>
                        <v-radio v-for="opt in fld.options" :key="opt" :label="opt" :value="opt" />
                      </v-radio-group>
                    </template>

                    <template v-if="fld.type === 'date'">
                      <v-text-field variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" type="date" :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'time'">
                      <v-text-field variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" type="time" :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>

                    <template v-if="fld.type === 'link'">
                      <v-text-field variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" type="text" :rules="fld.required ? [rules.required] : []" />
                    </template>

                    <template v-if="fld.type === 'number' || fld.type === 'number_currency'">
                      <v-text-field variant="outlined" :label="fld.label" v-model="editedItem[fld.key]" type="number" :min="fld.min" :max="fld.max" :rules="fld.required ? [rules.required] : []" :disabled="fld.disabled || false" />
                    </template>
                  </v-col>
                </v-row>
              </v-container>
            </v-card-text>

            <v-card-actions>
              <v-spacer></v-spacer>
              <v-btn color="blue-darken-1" variant="text" @click="close">Cancel</v-btn>
              <v-btn color="blue-darken-1" variant="text" @click="save" :disabled="saving">Save</v-btn>
            </v-card-actions>
          </v-card>
        </v-dialog>

        <v-dialog v-model="dialogDelete" max-width="500px">
          <v-card>
            <v-card-title class="text-h5">Are you sure you want to delete this Record?</v-card-title>
            <v-card-actions>
              <v-spacer></v-spacer>
              <v-btn color="blue-darken-1" variant="text" @click="closeDelete">Cancel</v-btn>
              <v-btn color="blue-darken-1" variant="text" @click="deleteItemConfirm">OK</v-btn>
              <v-spacer></v-spacer>
            </v-card-actions>
          </v-card>
      </v-dialog>


       <!-- replace with view dialog  -->
      <?!= include('components/DataTable/record_view'); ?>

      </v-toolbar>
    </template>
